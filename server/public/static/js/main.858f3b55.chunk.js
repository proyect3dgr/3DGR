(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),c=a.n(s),o=(a(35),a(8)),l=a(2),i=a(4),u=a(6),m=a(5),d=a(7),h=a(22),p=a(11),f=a(28),v=a.n(f),g=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e,a,n){return t.service.post("/signup",{username:e,password:a,email:n}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.checkLogin=function(){return t.service.get("/checklogin").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.handleUpload=function(e){return t.service.post("/upload",e).then(function(e){return e.data})},this.editProfile=function(e,a,n){return t.service.post("/edit-profile",{oldPass:e,newPass:a,newPassRepeat:n}).then(function(e){return e.data})},this.editAbout=function(e){return t.service.post("/edit-about",{about:e}).then(function(e){return e.data})},this.editAvatar=function(e){return t.service.post("/edit-avatar",{avatar:e}).then(function(e){return e.data})},this.deleteProfile=function(e){return console.log(e),t.service.delete("/delete-profile",{data:{id:e}}).then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://threedgr.herokuapp.com","/auth"),withCredentials:!0})},E=a(9),b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:"",password:""}),a.props.getUser(e)}).catch(function(e){console.log(e),a.setState(Object(o.a)({},a.state,{error:!0}))})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(p.a)({},n,r))},a.state={username:"",password:"",error:!1},a.service=new g,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,this.state.error?r.a.createElement("p",null,"'Incorrect Login'"):null),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",value:"Login"},"Login"))),r.a.createElement("div",null,r.a.createElement("p",null,"Don't have account?",r.a.createElement(E.b,{to:"/signup"}," Sign up"))))}}]),t}(n.Component),O=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.username,n=e.state.password,r=e.state.email;e.service.signup(a,n,r).then(function(t){console.log(t),e.errMessage=t.message,e.setState({username:"",password:"",email:""})}).then(function(t){e.setState({didSignUp:!0})}).catch(function(e){return console.log(e)})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r)),console.log(e.state.username),console.log(e.state.password)},e.state={username:"",password:"",email:"",didSignUp:!1},e.service=new g,e.errMessage="",e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return!0===this.state.didSignUp?r.a.createElement(h.a,{to:"/login"}):r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"email",type:"email",placeholder:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("p",null,this.errMessage)),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",value:"Signup"},"Signup"))),r.a.createElement("div",null,r.a.createElement("p",null,"Already have account?",r.a.createElement(E.b,{to:"/login"}," Login"))))}}]),t}(n.Component),S=a(59),j=a.n(S),w=a(60),C=a(62),y=a.n(C),N=a(63),P=a.n(N),U=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={currentIndex:0},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"setNextImage",value:function(){var e=this.state.currentIndex+1;2===e&&(e=0),this.setState({currentIndex:e})}},{key:"componentDidMount",value:function(){setTimeout(function(){this.setNextImage()}.bind(this),12e3)}},{key:"render",value:function(){return r.a.createElement(j.a,{selected:this.state.currentIndex,cssModule:w.a,className:"slider"},r.a.createElement("div",{"data-src":P.a}),r.a.createElement("video",{"data-src":y.a,autoPlay:!0,muted:!0}))}}]),t}(n.Component),k=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(E.b,{to:"/product/".concat(this.props._id)},r.a.createElement("article",{className:"productCard"},r.a.createElement("div",{className:"productImg"},r.a.createElement("img",{src:this.props.urlPathImg,alt:"productImg"})),r.a.createElement("div",{className:"productName"},this.props.title),r.a.createElement("div",{className:"productAuthor"},this.props.author.username),r.a.createElement("div",{className:"productPrice"},this.props.price," \u20ac")))}}]),t}(n.Component),D=function e(){var t=this;Object(l.a)(this,e),this.assets=function(){return t.service.get("/assets").then(function(e){return e.data})},this.handleUpload=function(e){return t.service.post("/upload",e).then(function(e){return e.data})},this.handleUploadModel=function(e){return t.service.post("/upload-asset",e).then(function(e){return e.data})},this.createAsset=function(e,a,n,r,s,c){return t.service.post("/create-asset",{title:e,price:a,description:n,model:r,size:s,image:c}).then(function(e){return e.data})},this.createComment=function(e,a){return t.service.post("/create-comment",{description:e,populateAsset:a}).then(function(e){return e.data})},this.getUser=function(e){return t.service.get("/user/".concat(e)).then(function(e){return e.data})},this.getAsset=function(e){return t.service.get("/product/".concat(e)).then(function(e){return e.data})},this.editAsset=function(e,a,n,r){return t.service.post("/edit-asset",{_id:e,title:a,price:n,description:r}).then(function(e){return e.data})},this.editAssetImg=function(e,a){return t.service.post("/edit-asset-img",{_id:e,image:a}).then(function(e){return e.data})},this.editAssetModel=function(e,a,n){return t.service.post("/edit-asset-model",{_id:e,model:a,size:n})},this.deleteAsset=function(e){return t.service.delete("/delete-asset",{data:{id:e}}).then(function(e){return e.data})},this.deleteComment=function(e){return t.service.delete("/delete-comment",{data:{id:e}}).then(function(e){return e.data})},this.service=v.a.create({baseURL:"https://threedgr.herokuapp.com",withCredentials:!0})},A=a(39),I=a.n(A),F=a(32),M=a.n(F),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getProfile=function(){var e=a.props.match.params.name;console.log(e),a.service.getUser(e).then(function(e){a.setState(e)})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.newPass,n=a.state.oldPass,r=a.state.newPassRepeat,s=a.state.image;s?a.authService.editAvatar(s).then(function(e){a.setState({image:"",avatar:e.avatar}),console.log(e.avatar),a.props.fetchUser()}):a.authService.editProfile(n,t,r).then(function(e){a.setState({oldPass:"",newPass:"",newPassRepeat:""})}).catch(function(e){console.log(e),a.setState(Object(o.a)({},a.state,{error:!0}))})},a.handleFormDelete=function(e,t){e.preventDefault();var n=t;a.service.deleteAsset(n).then(function(e){a.getProfile()})},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;a.setState(Object(p.a)({},n,r))},a.state={assetCollection:[],newPass:"",newPassRepeat:"",oldPass:"",image:"",about:a.props.about},a.service=new D,a.authService=new g,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getProfile()}},{key:"render",value:function(){var e=this;return console.log(this.state),console.log(this.props),this.props.username===this.props.match.params.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"infoUser"},r.a.createElement("article",null,r.a.createElement("div",{className:"userAvatar"},r.a.createElement("img",{src:this.state.avatar,alt:"avatar"})),r.a.createElement("div",{className:"details"},r.a.createElement("h1",null,this.state.username),r.a.createElement("h2",null,this.state.email)),r.a.createElement("div",{className:"description"},r.a.createElement("p",{className:"title"},"About Me"),r.a.createElement("p",null,this.state.about),r.a.createElement(E.b,{to:"/profile/settings"},r.a.createElement("div",{className:"edit"},r.a.createElement("img",{src:I.a,alt:"edit"})))))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("section",{className:"collection"},r.a.createElement("ul",null,this.state.assetCollection.map(function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("form",{onSubmit:function(a){return e.handleFormDelete(a,t._id)}},r.a.createElement("button",{className:"deleteBtn"},r.a.createElement("img",{src:M.a,alt:"delete button"})),r.a.createElement(E.b,{to:"/product-edit/".concat(t._id)},r.a.createElement("button",{className:"edit"},r.a.createElement("img",{src:I.a,alt:"delete button"})))),r.a.createElement(k,t))}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"infoUser"},r.a.createElement("article",null,r.a.createElement("div",{className:"userAvatar"},r.a.createElement("img",{src:this.state.avatar,alt:"avatar"})),r.a.createElement("div",{className:"details"},r.a.createElement("h1",null,this.state.username),r.a.createElement("h2",null,this.state.email)),r.a.createElement("div",{className:"description"},r.a.createElement("p",{className:"title"},"About Me"),r.a.createElement("p",null,this.state.about)))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("section",{className:"collection"},r.a.createElement("ul",null,this.state.assetCollection.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(k,e))})))))}}]),t}(n.Component),T=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"search",type:"search",name:"search",placeholder:"Search...",onChange:function(t){return e.props.filterProductHandler(t)},value:this.props.filterQuery}))}}]),t}(n.Component),_=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={filterQuery:"",assetDetails:[{author:""}],isLoading:!0,filteredAssets:[{author:""}]},e.service=new D,e._isMounted=!1,e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.service.assets().then(function(t){e._isMounted&&e.setState(Object(o.a)({},e.state,{assetDetails:t,filteredAssets:t}))})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"filterProduct",value:function(e){var t=e.target.value,a=this.state.assetDetails.filter(function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>-1});this.setState(Object(o.a)({},this.state,{filterQuery:t,filteredAssets:a}))}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"allProductList"},r.a.createElement("div",{className:"searchBar"},r.a.createElement(T,{filterQuery:this.state.filterQuery,filterProductHandler:function(t){return e.filterProduct(t)}})),r.a.createElement("div",{className:"productList"},this.state.filteredAssets.map(function(e,t){return r.a.createElement(k,Object.assign({key:t},e))})))}}]),t}(n.Component),L=a(1),R=a(64),z=a(69),B=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={urlPathModel:"hola"},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"componentDidUpdate",value:function(e,t){console.log(e),console.log(this.props.author),e!==this.props&&this.loadModel()}},{key:"loadModel",value:function(){var e=this.props.urlPathModel,t=new L.P;t.background=new L.j(10526880);var a=new L.i,n=new L.I(75,window.width/window.height,1,7e3);n.position.set(100,200,300),t.add(n);var r=new L.cb({antialias:!0}),s=document.querySelector(".canvas");r.shadowMap.enabled=!0;var c=new R.a(n,r.domElement);c.enabled=!0,c.minDistance=.1,c.enableDamping=!0,c.dampingFactor=.5,c.enableZoom=!0,r.domElement.setAttribute("class","canvas"),s.appendChild(r.domElement);var o=(new L.V).load("https://66.media.tumblr.com/07b00df16a910359a331e158b79dfa72/tumblr_nvuw1mFBzL1qharjqo1_500.gif"),l=new L.e(.1,.1,.1),i=new L.D({map:o,wireframe:!1}),u=new L.C(l,i);u.position.set(0,0,0),t.add(u);var m=new L.t(16777215,4473924);m.position.set(0,200,0),t.add(m);var d=new L.m(16777215,.2);d.position.set(0,200,100),d.castShadow=!0,d.shadow.camera.top=180,d.shadow.camera.bottom=-100,d.shadow.camera.left=-120,d.shadow.camera.right=120,t.add(d);var h=new L.C(new L.J(2e3,2e3),new L.E({color:10066329,depthWrite:!1}));h.rotation.x=-Math.PI/2,h.receiveShadow=!0,h.position.set(0,0,0),t.add(h);var p=r.domElement,f=p.clientWidth,v=p.clientHeight;p.width===f&&p.height===v||(r.setSize(f,v,!1),n.aspect=f/v,n.updateProjectionMatrix());var g=new z.a,E=void 0;g.load("".concat(e),function(e){var a=new L.c(e);E=a,a.clipAction(e.animations[0]).play(),e.traverse(function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)}),t.add(e)}),function e(){requestAnimationFrame(e);var s=a.getDelta();E&&E.update(s),r.render(t,n)}()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),t}(n.Component),q=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.description,n=e.props.paramsId;e.service.createComment(a,n).then(function(t){e.setState({description:""}),e.getAsset()}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleFormDelete=function(t,a){t.preventDefault();var n=a;e.service.deleteComment(n).then(function(t){e.getAsset()})},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.state={description:"",assetDetails:{author:"",comments:[{author:""}]}},e.service=new D,e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getAsset()}},{key:"getAsset",value:function(){var e=this,t=this.props.paramsId;this.service.getAsset(t).then(function(t){e.setState(Object(o.a)({},e.state,{assetDetails:t}))})}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"comments"},r.a.createElement("div",{className:"displayComments"},r.a.createElement("div",null,r.a.createElement("h1",null,"Comments")),this.state.assetDetails.comments.map(function(t,a){return e.props.loggedUser===t.author.username?r.a.createElement("div",{className:"comment",key:a},r.a.createElement("h4",{className:"author"},t.author.username),r.a.createElement("h3",{className:"message"},t.description),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(a){return e.handleFormDelete(a,t._id)}},r.a.createElement("button",{className:"deleteBtn"},r.a.createElement("img",{src:M.a,alt:"delete button"}))))):r.a.createElement("div",{className:"comment",key:a},r.a.createElement("h4",{className:"author"},t.author.username),r.a.createElement("h3",{className:"message"},t.description))})),r.a.createElement("div",{className:"newComment"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("textarea",{name:"description",placeholder:"Your new comment...",value:this.state.description,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("button",null,"Post it!")))))}}]),t}(n.Component),H=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.description,n=e.state.title,r=e.state.price,s=e.state.image,c=e.props.match.params.id;s?e.service.editAssetImg(c,s).then(function(t){e.setState({image:""}),e.getAsset()}):e.service.editAsset(c,n,r,a).then(function(t){e.setState({title:"",description:"",price:void 0})}).then(function(t){e.getAsset()}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleCartAdd=function(t){t.preventDefault(),e.props.addToCart(e.state.assetDetails),e.setState(Object(o.a)({},e.state,{addedToCart:!0}))},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.state={assetDetails:{author:"",comments:[{author:""}]},title:"",price:void 0,description:"",image:"",isLoading:!0,addedToCart:!1},e.service=new D,e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getAsset()}},{key:"getAsset",value:function(){var e=this,t=this.props.match.params.id;this.service.getAsset(t).then(function(t){e.setState(Object(o.a)({},e.state,{assetDetails:t})),console.log(e.state.assetDetails.urlPathModel)})}},{key:"render",value:function(){var e=this;return!0===this.state.addedToCart?r.a.createElement(h.a,{to:"/cart"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"productDetail"},r.a.createElement("div",{className:"canvas"},r.a.createElement(B,this.state.assetDetails)),r.a.createElement("div",{className:"aside"},r.a.createElement("h1",{className:"titleAsset"},this.state.assetDetails.title),r.a.createElement("h2",null,r.a.createElement(E.b,{to:"/profile/".concat(this.state.assetDetails.author.username)},this.state.assetDetails.author.username)),r.a.createElement("img",{className:"photo",src:this.state.assetDetails.urlPathImg,alt:"assetPhoto"}),r.a.createElement("h2",{className:"descriptionAsset"},this.state.assetDetails.description),r.a.createElement("h5",{className:"priceAsset"},this.state.assetDetails.price," \u20ac"),this.props.username===this.state.assetDetails.author.username||null==this.props.username?null:r.a.createElement("button",{onClick:function(t){return e.handleCartAdd(t)}},"Add to Cart"))),r.a.createElement(q,{loggedUser:this.props.username,paramsId:this.props.match.params.id}))}}]),t}(n.Component),G=a(65),W=a.n(G),Q=a(23),J=a.n(Q),Y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(J.a,{className:"dropMenu"},r.a.createElement(J.a.Toggle,{variant:"",id:"dropdown-basic"},r.a.createElement("img",{className:"avatar",src:this.props.userLogged.avatar,alt:"avatar"})),r.a.createElement(J.a.Menu,null,r.a.createElement(J.a.Item,{href:"/profile/".concat(this.props.userLogged.username)},"Profile"),r.a.createElement(J.a.Item,{href:"/settings"},"Settings"),r.a.createElement(J.a.Item,{href:"/product/upload"},"Upload New Asset"),r.a.createElement(J.a.Item,{onClick:function(t){e.props.logout(t)}},"Log Out")))}}]),t}(n.Component),Z=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.userLogged?r.a.createElement("nav",{className:"nav"},r.a.createElement(E.b,{to:"/"},r.a.createElement("span",{className:"name"},"3DGR")),r.a.createElement("div",{className:"menu"},r.a.createElement("div",null,r.a.createElement(Y,{logout:this.props.logout,userLogged:this.props.userLogged})),r.a.createElement("div",null,r.a.createElement(E.b,{to:"/cart"},r.a.createElement("img",{className:"cart",src:W.a,alt:"cart"}))))):r.a.createElement("nav",{className:"nav"},r.a.createElement(E.b,{to:"/"},r.a.createElement("span",{className:"name"},"3DGR")),r.a.createElement("div",{className:"menu"},r.a.createElement("div",null,r.a.createElement(E.b,{to:"/signup"},"Sign up")),r.a.createElement("div",null,r.a.createElement(E.b,{to:"/login"},"Login"))))}}]),t}(n.Component),K=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.title,n=e.state.price,r=e.state.description,s=e.state.image,c=e.state.model,l=e.state.size;console.log(s),console.log(l),console.log(c),s?e.service.createAsset(a,n,r,c,l,s).then(function(t){e.setState({title:"",price:"",description:"",image:"",model:"",size:""})}).then(function(t){e.setState({created:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))}):e.service.createAsset(a,n,r,c,l).then(function(t){e.setState({title:"",price:"",description:"",model:"",size:""})}).then(function(t){e.setState({created:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleImgUpload=function(t){console.log("The file to be uploaded is: ",t.target.files[0]);var a=new FormData;a.append("modelImg",t.target.files[0]),e.service.handleUpload(a).then(function(t){console.log("response is: ",t),e.setState({image:t.secure_url})}).then(function(t){e.setState({imgUploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},e.handleModelUpload=function(t){console.log("The file to be uploaded is: ",t.target.files[0]);var a=new FormData;a.append("modelFile",t.target.files[0]),e.service.handleUploadModel(a).then(function(t){console.log("response is: ",t),e.setState({size:Math.floor(t.bytes/2048),model:t.secure_url})}).then(function(t){e.setState({modelUploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},e.state={title:"",price:"",description:"",image:"",model:"",size:"",created:!1,imgUploaded:!1,modelUploaded:!1},e.service=new D,e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return!0===this.state.created?r.a.createElement(h.a,{to:"/profile/".concat(this.props.user)}):r.a.createElement("section",{className:"uploadNewAsset"},r.a.createElement("h1",null,"Upload your New Asset"),r.a.createElement("form",{className:"upload",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"upPart"},r.a.createElement("div",null,r.a.createElement("input",{name:"title",required:!0,placeholder:"Title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"price",type:"number",required:!0,placeholder:"Price",value:this.state.price,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("textarea",{name:"description",placeholder:"Description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("div",{className:"each"},r.a.createElement("label",{for:"cover"},"Preview Image"),r.a.createElement("input",{className:"file",name:"cover",type:"file",onChange:function(t){return e.handleImgUpload(t)}})),r.a.createElement("div",{className:"each"},r.a.createElement("label",{for:"model"},"Model File"),r.a.createElement("input",{className:"file",name:"model",required:!0,type:"file",onChange:function(t){return e.handleModelUpload(t)}}))),r.a.createElement("div",{className:"infernoPart"},this.state.modelUploaded?r.a.createElement("button",null,"Upload It!"):r.a.createElement("button",{disabled:!0},"Upload It!"))))}}]),t}(n.Component),V=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getProfile=function(){var t=e.props.username;e.service.getUser(t).then(function(t){e.setState(t)})},e.handleFormSubmitAvatar=function(t){t.preventDefault();var a=e.state.image;e.authService.editAvatar(a).then(function(t){e.setState({image:"",avatar:t.avatar}),e.props.reloadUser()}).then(function(t){e.setState({edited:!0})})},e.handleAboutSubmit=function(t){t.preventDefault();var a=e.state.about;e.authService.editAbout(a).then(function(t){e.setState({about:""}),e.props.reloadUser()}).then(function(t){e.setState({edited:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state.newPass,n=e.state.oldPass,r=e.state.newPassRepeat;e.authService.editProfile(n,a,r).then(function(t){e.setState({oldPass:"",newPass:"",newPassRepeat:""})}).then(function(t){e.setState({edited:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleFormDelete=function(t,a){t.preventDefault();var n=a;e.authService.deleteProfile(n).then(function(t){e.props.reloadUser()}).then(function(t){e.setState({deleted:!0})})},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleFileUpload=function(t){var a=new FormData;a.append("avatar",t.target.files[0]),e.authService.handleUpload(a).then(function(t){e.setState({image:t.secure_url})}).then(function(t){console.log("miuau hola como estas?"),e.setState({uploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},e.state={assetCollection:[],newPass:"",newPassRepeat:"",oldPass:"",about:"",avatar:"",secure_url:"",image:"",deleted:!1,edited:!1,uploaded:!1},e.service=new D,e.authService=new g,e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getProfile()}},{key:"render",value:function(){var e=this;return!0===this.state.deleted?r.a.createElement(h.a,{to:"/"}):!0===this.state.edited?r.a.createElement(h.a,{to:"/profile/".concat(this.state.username)}):r.a.createElement("section",{className:"settings"},r.a.createElement("h1",null,"Settings"),r.a.createElement("div",{className:"upPart"},r.a.createElement("form",{className:"password",onSubmit:this.handleFormSubmit},r.a.createElement("input",{name:"oldPass",type:"text",placeholder:"Old Password",value:this.state.oldPass,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{name:"newPass",type:"text",placeholder:"New Password",value:this.state.newPass,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{name:"newPassRepeat",type:"text",placeholder:"Repeat New Password",value:this.state.newPassRepeat,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("button",null,"Change your Password!")),r.a.createElement("form",{className:"description",onSubmit:this.handleAboutSubmit},r.a.createElement("textarea",{name:"about",onChange:function(t){return e.handleChange(t)},value:this.state.about,placeholder:"About me..."}),r.a.createElement("button",null,"Change your Description!")),r.a.createElement("form",{className:"avatar",onSubmit:this.handleFormSubmitAvatar},r.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileUpload(t)}}),!0===this.state.uploaded?r.a.createElement("button",null,"Change your Avatar!"):r.a.createElement("button",{disabled:!0},"Change your Avatar!"))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("form",{className:"deleteAccount",onSubmit:function(t){return e.handleFormDelete(t,e.state._id)}},r.a.createElement("button",null,"Delete your account")),r.a.createElement("p",null,"(Only delete if you don't have any asset in your profile)")))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.title,n=a.state.price,r=a.state.description,s=a.props.match.params.id;a.service.editAsset(s,t,n,r).then(function(e){a.setState({title:"",price:"",description:""})}).then(function(e){a.setState({created:!0})}).catch(function(e){console.log(e),a.setState(Object(o.a)({},a.state,{error:!0}))})},a.handleFormImage=function(e){e.preventDefault();var t=a.state.image,n=a.props.match.params.id;console.log(t),console.log(n),a.service.editAssetImg(n,t).then(function(e){a.setState({image:""})}).then(function(e){a.setState({imgUploaded:!1})}).catch(function(e){console.log(e),a.setState(Object(o.a)({},a.state,{error:!0}))})},a.handleFormModel=function(e){e.preventDefault();var t=a.state.model,n=a.state.size,r=a.props.match.params.id;a.service.editAssetModel(r,t,n).then(function(e){a.setState({model:"",size:""})}).then(function(e){a.setState({created:!1})}).catch(function(e){console.log(e),a.setState(Object(o.a)({},a.state,{error:!0}))})},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;a.setState(Object(p.a)({},n,r))},a.handleImgUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("modelImg",e.target.files[0]),a.service.handleUpload(t).then(function(e){console.log("response is: ",e),a.setState({image:e.secure_url})}).then(function(e){a.setState({imgUploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},a.handleModelUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("modelFile",e.target.files[0]),a.service.handleUploadModel(t).then(function(e){console.log("response is: ",e),a.setState({size:Math.floor(e.bytes/2048),model:e.secure_url})}).then(function(e){a.setState({modelUploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},a.state={_id:"",title:"",price:"",description:"",image:"",model:"",size:"",created:!1,imgUploaded:!1,modelUploaded:!1},a.service=new D,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getAsset()}},{key:"getAsset",value:function(){var e=this,t=this.props.match.params.id;this.service.getAsset(t).then(function(t){e.setState(Object(o.a)({},e.state,t))})}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"edditAsset"},r.a.createElement("h1",null,"Update your Asset"),r.a.createElement("form",{className:"upload",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"upPart"},r.a.createElement("div",null,r.a.createElement("input",{name:"title",placeholder:"Title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"price",type:"number",placeholder:"Price",value:this.state.price,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("textarea",{name:"description",placeholder:"Description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"infernoPart"},r.a.createElement("button",null,"Update Then!"))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("form",{onSubmit:this.handleFormImage},r.a.createElement("label",{htmlFor:"cover"},"Preview Image"),r.a.createElement("input",{className:"file",name:"cover",type:"file",onChange:function(t){return e.handleImgUpload(t)}}),this.state.imgUploaded?r.a.createElement("button",null,"Upload It!"):r.a.createElement("button",{disabled:!0},"Upload It!")),r.a.createElement("form",{onSubmit:this.handleFormModel},r.a.createElement("label",{htmlFor:"model"},"Model File"),r.a.createElement("input",{className:"file",name:"model",type:"file",onChange:function(t){return e.handleModelUpload(t)}}),this.state.modelUploaded?r.a.createElement("button",null,"Upload It!"):r.a.createElement("button",{disabled:!0},"Upload It!"))))}}]),t}(n.Component),$=a(68),ee=a.n($),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).successPayment=function(e){alert("Payment Successful")},a.errorPayment=function(e){alert("Payment Error")},a.onToken=function(e,t){return function(n){v.a.post("".concat("https://threedgr.herokuapp.com","/stripe-checkout"),{description:t,source:n.id,currency:a.currency,amount:a.fromEurotoCent(e)}).then(a.successPayment).then(a.props.emptyCart()).catch(a.errorPayment)}},a.state={payedSuccessful:!1},a.currency="EUR",a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"fromEurotoCent",value:function(e){return 100*e}},{key:"render",value:function(){return r.a.createElement(ee.a,{style:{background:"transparent",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 1), 0 6px 20px 0 rgba(0, 0, 0, 1)",borderRadious:"1rem"},className:"checkOut",name:this.props.name,description:this.props.description,amount:100*this.props.amount,image:"https://res.cloudinary.com/rubvaldev/image/upload/v1564482712/thing-gallery/tumblr_pnws4g87zZ1uag7foo1_640.gif.gif",token:this.onToken(this.props.amount,this.props.description),currency:this.currency,label:"PAY WITH RUBENS",stripeKey:"pk_test_yXbH7Dka8dts3P5MoCkiIj2w00660aZ1So"})}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={cart:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log(this.state.cart),this.setState(Object(o.a)({},this.state,{cart:this.props.cart}))}},{key:"removeProductFromBasket",value:function(e){for(var t=Object(o.a)({},this.state),a=0,n=0;n<t.cart.length;n++)t.cart[n]._id===e&&(a=n);t.cart.splice(a,1),this.setState(t)}},{key:"render",value:function(){var e=this;return console.log(this.state),0===this.props.cart.length?r.a.createElement("section",{className:"cartCheckoutBg"},r.a.createElement("h1",null,"Shopping Cart"),r.a.createElement("hr",null),r.a.createElement("p",null,"You have no items in your cart"),r.a.createElement("hr",null),r.a.createElement(E.b,{to:"/"},r.a.createElement("button",null,"CONTINUE SHOPPING"))):r.a.createElement("section",{className:"cartCheckoutBg"},r.a.createElement("h1",null,"Shopping Cart"),r.a.createElement("hr",null),r.a.createElement("article",{className:"cartCheckout"},r.a.createElement("div",{className:"containerItems"},this.state.cart.map(function(t,a){return r.a.createElement("div",{className:"item",key:a},r.a.createElement("div",{className:"itemImg"},r.a.createElement("img",{className:"realImg",src:t.urlPathImg,alt:"item"})),r.a.createElement("div",{className:"itemTP"},r.a.createElement("p",null,t.title),r.a.createElement("p",null,t.price," \u20ac")),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.removeProductFromBasket(t._id)}},"Delete")))})),r.a.createElement("hr",null),r.a.createElement("div",{className:"totalPrice"},r.a.createElement("div",null,r.a.createElement("span",null,"Total Price:")),r.a.createElement("div",null,r.a.createElement("span",null,this.props.getCartTotal()," \u20ac"))),r.a.createElement("div",{className:"buttonsPart"},r.a.createElement(E.b,{to:"/"},r.a.createElement("button",null,"CONTINUE SHOPPING")),r.a.createElement(te,{name:"3DGR Checkout",description:"Give me all your money",amount:this.props.getCartTotal(),emptyCart:function(){return e.props.emptyCart()}}))))}}]),t}(n.Component),ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getTheUser=function(e){a.setState(Object(o.a)({},a.state,{loggedInUser:e}))},a.logout=function(e){e.preventDefault(),a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.fetchUser=function(){a.service.checkLogin().then(function(e){a.getTheUser(e)})},a.state={loggedInUser:null,cart:[]},a.service=new g,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"addToCart",value:function(e){var t=Object(o.a)({},this.state);t.cart.push(e),this.setState(t),console.log(t.cart)}},{key:"getCartTotal",value:function(){return this.state.cart.reduce(function(e,t){return e+t.price},0)}},{key:"emptyCart",value:function(){var e=Object(o.a)({},this.state,{cart:[]});this.setState(e)}},{key:"removeProductFromBasket",value:function(e){for(var t=Object(o.a)({},this.state),a=0,n=0;n<t.cart.length;n++)t.cart[n].id===e&&(a=n);t.cart.splice(a,1),this.setState(t)}},{key:"componentDidMount",value:function(){var e=this;this.service.checkLogin().then(function(t){e.getTheUser(t)})}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{logout:this.logout,isProductList:this.state.isProductList,userLogged:this.state.loggedInUser}),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/profile/:name",render:function(t){return r.a.createElement(x,Object.assign({},t,e.state.loggedInUser,{fetchUser:e.fetchUser}))}}),r.a.createElement(h.b,{exact:!0,path:"/(login|signup)/",render:function(){return r.a.createElement(h.a,{to:"/profile/".concat(e.state.loggedInUser.username)})}}),r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement(_,null))}}),r.a.createElement(h.b,{exact:!0,path:"/product/upload",render:function(){return r.a.createElement(K,{user:e.state.loggedInUser.username})}}),r.a.createElement(h.b,{exact:!0,path:"/product/:id",render:function(t){return r.a.createElement(H,Object.assign({},t,e.state.loggedInUser,{addToCart:function(t){return e.addToCart(t)}}))}}),r.a.createElement(h.b,{exact:!0,path:"/settings",render:function(){return r.a.createElement(V,Object.assign({reloadUser:e.fetchUser},e.state.loggedInUser))}}),r.a.createElement(h.b,{exact:!0,path:"/product-edit/:id",render:function(e){return r.a.createElement(X,e)}}),r.a.createElement(h.b,{exact:!0,path:"/cart",render:function(){return r.a.createElement(ae,{cart:e.state.cart,getCartTotal:function(){return e.getCartTotal()},removeProductFromBasket:function(t){return e.removeProductFromBasket(t)},emptyCart:function(){return e.emptyCart()}})}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,null),r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement(_,null))}}),r.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(b,Object.assign({},e.state.loggedInUser,{getUser:e.getTheUser}))}}),r.a.createElement(h.b,{exact:!0,path:"/signup",render:function(){return r.a.createElement(O,null)}}),r.a.createElement(h.b,{exact:!0,path:"/product/:id",render:function(e){return r.a.createElement(H,e)}}),r.a.createElement(h.b,{exact:!0,path:"/profile/:name",render:function(e){return r.a.createElement(x,e)}}),r.a.createElement(h.b,{exact:!0,path:"/product/upload",render:function(){return r.a.createElement(h.a,{to:"/login"})}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(E.a,null,r.a.createElement(ne,{router:E.a})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},32:function(e,t,a){e.exports=a.p+"static/media/bin.53c6c44c.png"},35:function(e,t,a){},39:function(e,t,a){e.exports=a.p+"static/media/edit-button.07c57606.svg"},62:function(e,t,a){e.exports=a.p+"static/media/trailer.9a5972e7.mp4"},63:function(e,t,a){e.exports=a.p+"static/media/banner3.65981485.jpg"},65:function(e,t,a){e.exports=a.p+"static/media/cart.0000ab50.png"},70:function(e,t,a){e.exports=a(121)}},[[70,1,2]]]);
//# sourceMappingURL=main.858f3b55.chunk.js.map