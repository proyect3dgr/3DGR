(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),l=a.n(s),o=(a(35),a(9)),i=a(3),c=a(4),u=a(6),m=a(5),d=a(7),h=a(22),p=a(11),f=a(31),g=a.n(f),v=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,a,n){return t.service.post("/signup",{username:e,password:a,email:n}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.checkLogin=function(){return t.service.get("/checklogin").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.handleUpload=function(e){return t.service.post("/upload",e).then(function(e){return e.data})},this.editProfile=function(e,a,n){return t.service.post("/edit-profile",{oldPass:e,newPass:a,newPassRepeat:n}).then(function(e){return e.data})},this.editAbout=function(e){return t.service.post("/edit-about",{about:e}).then(function(e){return e.data})},this.editAvatar=function(e){return t.service.post("/edit-avatar",{avatar:e}).then(function(e){return e.data})},this.deleteProfile=function(e){return console.log(e),t.service.delete("/delete-profile",{data:{id:e}}).then(function(e){return e.data})},this.service=g.a.create({baseURL:"http://localhost:5000/auth",withCredentials:!0})},E=a(8),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:"",password:""}),a.props.getUser(e)}).catch(function(e){console.log(e),a.setState(Object(o.a)({},a.state,{error:!0}))})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(p.a)({},n,r))},a.state={username:"",password:"",error:!1},a.service=new v,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,this.state.error?r.a.createElement("p",null,"'Incorrect Login'"):null),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",value:"Login"},"Login"))),r.a.createElement("div",null,r.a.createElement("p",null,"Don't have account?",r.a.createElement(E.b,{to:"/signup"}," Sign up"))))}}]),t}(n.Component),w=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.username,n=e.state.password,r=e.state.email;e.service.signup(a,n,r).then(function(t){console.log(t),e.errMessage=t.message,e.setState({username:"",password:"",email:""})}).then(function(t){e.setState({didSignUp:!0})}).catch(function(e){return console.log(e)})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r)),console.log(e.state.username),console.log(e.state.password)},e.state={username:"",password:"",email:"",didSignUp:!1},e.service=new v,e.errMessage="",e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return!0===this.state.didSignUp?r.a.createElement(h.a,{to:"/login"}):r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"email",type:"email",placeholder:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("p",null,this.errMessage)),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",value:"Signup"},"Signup"))),r.a.createElement("div",null,r.a.createElement("p",null,"Already have account?",r.a.createElement(E.b,{to:"/login"}," Login"))))}}]),t}(n.Component),j=a(59),O=a.n(j),S=a(60),N=a(62),C=a.n(N),y=a(63),U=a.n(y),P=a(64),D=a.n(P),A=a(65),F=a.n(A),k=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{cssModule:S.a,className:"slider"},r.a.createElement("div",{"data-src":F.a}),r.a.createElement("div",{"data-src":C.a}),r.a.createElement("div",{"data-src":U.a}),r.a.createElement("div",{"data-src":D.a}))}}]),t}(n.Component),I=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E.b,{to:"/product/".concat(this.props._id)},r.a.createElement("article",{className:"productCard"},r.a.createElement("div",{className:"productImg"},r.a.createElement("img",{src:this.props.urlPathImg,alt:"productImg"})),r.a.createElement("div",{className:"productName"},this.props.title),r.a.createElement("div",{className:"productAuthor"},this.props.author.username),r.a.createElement("div",{className:"productPrice"},this.props.price," \u20ac")))}}]),t}(n.Component),M=function e(){var t=this;Object(i.a)(this,e),this.assets=function(){return t.service.get("/assets").then(function(e){return e.data})},this.handleUpload=function(e){return t.service.post("/upload",e).then(function(e){return e.data})},this.handleUploadModel=function(e){return t.service.post("/upload-asset",e).then(function(e){return e.data})},this.createAsset=function(e,a,n,r,s,l){return console.log(e,a,n,r,s,l),t.service.post("/create-asset",{title:e,price:a,description:n,model:r,size:s,image:l}).then(function(e){return e.data})},this.createComment=function(e,a){return t.service.post("/create-comment",{description:e,populateAsset:a}).then(function(e){return e.data})},this.getUser=function(e){return t.service.get("/user/".concat(e)).then(function(e){return e.data})},this.getAsset=function(e){return t.service.get("/product/".concat(e)).then(function(e){return e.data})},this.editAsset=function(e,a,n,r){return t.service.post("/edit-asset",{_id:e,title:a,price:n,description:r}).then(function(e){return e.data})},this.editAssetImg=function(e,a){return t.service.post("/edit-asset-img",{_id:e,image:a}).then(function(e){return e.data})},this.deleteAsset=function(e){return console.log(e),t.service.delete("/delete-asset",{data:{id:e}}).then(function(e){return e.data})},this.deleteComment=function(e){return console.log(e),t.service.delete("/delete-comment",{data:{id:e}}).then(function(e){return e.data})},this.service=g.a.create({baseURL:"http://localhost:5000",withCredentials:!0})},x=a(39),L=a.n(x),_=a(32),R=a.n(_),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getProfile=function(){var e=a.props._id;a.service.getUser(e).then(function(e){a.setState(e)})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.newPass,n=a.state.oldPass,r=a.state.newPassRepeat,s=a.state.image;s?a.authService.editAvatar(s).then(function(e){a.setState({image:"",avatar:e.avatar}),console.log(e.avatar),a.props.fetchUser()}):a.authService.editProfile(n,t,r).then(function(e){a.setState({oldPass:"",newPass:"",newPassRepeat:""})}).catch(function(e){console.log(e),a.setState(Object(o.a)({},a.state,{error:!0}))})},a.handleFormDelete=function(e,t){e.preventDefault();var n=t;a.service.deleteAsset(n).then(function(e){a.getProfile()})},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;a.setState(Object(p.a)({},n,r))},a.state={assetCollection:[],newPass:"",newPassRepeat:"",oldPass:"",image:"",about:a.props.about},a.service=new M,a.authService=new v,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getProfile()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"infoUser"},r.a.createElement("article",null,r.a.createElement("div",{className:"userAvatar"},r.a.createElement("img",{src:this.state.avatar,alt:"avatar"})),r.a.createElement("div",{className:"details"},r.a.createElement("h1",null,this.props.username),r.a.createElement("h2",null,this.props.email)),r.a.createElement("div",{className:"description"},r.a.createElement("p",{className:"title"},"About Me"),r.a.createElement("p",null,this.props.about),r.a.createElement(E.b,{to:"/profile/settings"},r.a.createElement("div",{className:"edit"},r.a.createElement("img",{src:L.a,alt:"edit"})))))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("section",{className:"collection"},r.a.createElement("ul",null,this.state.assetCollection.map(function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("form",{onSubmit:function(a){return e.handleFormDelete(a,t._id)}},r.a.createElement("button",{className:"deleteBtn"},r.a.createElement("img",{src:R.a,alt:"delete button"})),r.a.createElement(E.b,{to:"/product-edit"},r.a.createElement("button",{className:"edit"},r.a.createElement("img",{src:L.a,alt:"delete button"})))),r.a.createElement(I,Object.assign({className:"cocowawa"},t)))})))))}}]),t}(n.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"search",type:"search",name:"search",placeholder:"Search...",onChange:function(t){return e.props.filterProductHandler(t)},value:this.props.filterQuery}))}}]),t}(n.Component),q=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={filterQuery:"",assetDetails:[{author:""}],isLoading:!0,filteredAssets:[{author:""}]},e.service=new M,e._isMounted=!1,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.service.assets().then(function(t){e._isMounted&&e.setState(Object(o.a)({},e.state,{assetDetails:t,filteredAssets:t}))})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"filterProduct",value:function(e){var t=e.target.value,a=this.state.assetDetails.filter(function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>-1});this.setState(Object(o.a)({},this.state,{filterQuery:t,filteredAssets:a}))}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"allProductList"},r.a.createElement("div",{className:"searchBar"},r.a.createElement(T,{filterQuery:this.state.filterQuery,filterProductHandler:function(t){return e.filterProduct(t)}})),r.a.createElement("div",{className:"productList"},this.state.filteredAssets.map(function(e,t){return r.a.createElement(I,Object.assign({key:t},e))})))}}]),t}(n.Component),B=a(1),Q=a(66),W=a(70),G=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={urlPathModel:"hola"},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"componentDidUpdate",value:function(e,t){console.log(e),console.log(this.props.author),e!==this.props&&this.loadModel()}},{key:"loadModel",value:function(){var e=this.props.urlPathModel,t=new B.R;t.background=new B.j(10526880),t.fog=new B.s(10526880,300,5e3);var a=new B.i,n=new B.K(75,window.width/window.height,.1,4e3);n.position.set(100,200,300),n.lookAt(t.position),t.add(n);var r=new B.eb({antialias:!0}),s=document.querySelector(".canvas");r.shadowMap.enabled=!0;var l=new Q.a(n,r.domElement);l.enabled=!0,l.minDistance=1.5,l.enableDamping=!0,l.dampingFactor=.5,l.enableZoom=!0,r.domElement.setAttribute("class","canvas"),s.appendChild(r.domElement);var o=(new B.X).load("https://66.media.tumblr.com/07b00df16a910359a331e158b79dfa72/tumblr_nvuw1mFBzL1qharjqo1_500.gif"),i=new B.e(.1,.1,.1),c=new B.F({map:o,wireframe:!1}),u=new B.E(i,c);u.position.set(0,0,0),t.add(u);var m=new B.v(16777215,4473924);m.position.set(0,200,0),t.add(m);var d=new B.m(16777215,.2);d.position.set(0,200,100),d.castShadow=!0,d.shadow.camera.top=180,d.shadow.camera.bottom=-100,d.shadow.camera.left=-120,d.shadow.camera.right=120,t.add(d);var h=new B.E(new B.L(2e3,2e3),new B.G({color:10066329,depthWrite:!1}));h.rotation.x=-Math.PI/2,h.receiveShadow=!0,h.position.set(0,-5,0),t.add(h);var p=new B.t(2e3,20,0,0);p.material.opacity=.2,p.material.transparent=!0,p.position.set(0,-5,0),t.add(p);var f=r.domElement,g=f.clientWidth,v=f.clientHeight;f.width===g&&f.height===v||(r.setSize(g,v,!1),n.aspect=g/v,n.updateProjectionMatrix());var E=new W.a,b=void 0;E.load("".concat(e),function(e){var a=new B.c(e);b=a,a.clipAction(e.animations[0]).play(),e.traverse(function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)}),t.add(e)}),function e(){requestAnimationFrame(e);var s=a.getDelta();b&&b.update(s),r.render(t,n)}()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),t}(n.Component),H=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.description,n=e.props.paramsId;e.service.createComment(a,n).then(function(t){e.setState({description:""}),e.getAsset()}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleFormDelete=function(t,a){t.preventDefault();var n=a;e.service.deleteComment(n).then(function(t){e.getAsset()})},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.state={description:"",assetDetails:{author:"",comments:[{author:""}]}},e.service=new M,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAsset()}},{key:"getAsset",value:function(){var e=this,t=this.props.paramsId;this.service.getAsset(t).then(function(t){e.setState(Object(o.a)({},e.state,{assetDetails:t}))})}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"comments"},r.a.createElement("div",{className:"displayComments"},r.a.createElement("div",null,r.a.createElement("h1",null,"Comments")),this.state.assetDetails.comments.map(function(t,a){return e.props.loggedUser===t.author.username?r.a.createElement("div",{className:"comment",key:a},r.a.createElement("h4",{className:"author"},t.author.username),r.a.createElement("h3",{className:"message"},t.description),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(a){return e.handleFormDelete(a,t._id)}},r.a.createElement("button",{className:"deleteBtn"},r.a.createElement("img",{src:R.a,alt:"delete button"}))))):r.a.createElement("div",{className:"comment",key:a},r.a.createElement("h4",{className:"author"},t.author.username),r.a.createElement("h3",{className:"message"},t.description))})),r.a.createElement("div",{className:"newComment"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("textarea",{name:"description",placeholder:"Your new comment...",value:this.state.description,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("button",null,"Post it!")))))}}]),t}(n.Component),J=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.description,n=e.state.title,r=e.state.price,s=e.state.image,l=e.props.match.params.id;s?e.service.editAssetImg(l,s).then(function(t){e.setState({image:""}),e.getAsset()}):e.service.editAsset(l,n,r,a).then(function(t){e.setState({title:"",description:"",price:void 0})}).then(function(t){e.getAsset()}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.state={assetDetails:{author:"",comments:[{author:""}]},title:"",price:void 0,description:"",image:"",isLoading:!0},e.service=new M,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAsset()}},{key:"getAsset",value:function(){var e=this,t=this.props.match.params.id;this.service.getAsset(t).then(function(t){e.setState(Object(o.a)({},e.state,{assetDetails:t})),console.log(e.state.assetDetails.urlPathModel)})}},{key:"render",value:function(){return this.props.username===this.state.assetDetails.author.username?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"productDetail"},r.a.createElement("div",{className:"canvas"},r.a.createElement(G,this.state.assetDetails)),r.a.createElement("div",{className:"aside"},r.a.createElement("div",null,r.a.createElement("h1",{className:"titleAsset"},this.state.assetDetails.title),r.a.createElement("img",{className:"photo",src:this.state.assetDetails.urlPathImg,alt:"ok"}),r.a.createElement("h2",{className:"descriptionAsset"},this.state.assetDetails.description),r.a.createElement("h5",{className:"priceAsset"},this.state.assetDetails.price," \u20ac")))),r.a.createElement("div",null,r.a.createElement(H,{loggedUser:this.props.username,paramsId:this.props.match.params.id}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"productDetail"},r.a.createElement("div",{className:"canvas"},r.a.createElement(G,this.state.assetDetails)),r.a.createElement("div",{className:"aside"},r.a.createElement("h1",{className:"titleAsset"},this.state.assetDetails.title),r.a.createElement("img",{className:"photo",src:this.state.assetDetails.urlPathImg,alt:"assetPhoto"}),r.a.createElement("h2",{className:"descriptionAsset"},this.state.assetDetails.description),r.a.createElement("h5",{className:"priceAsset"},this.state.assetDetails.price," \u20ac"))),r.a.createElement(H,{loggedUser:this.props.username,paramsId:this.props.match.params.id}))}}]),t}(n.Component),K=a(67),X=a.n(K),Y=a(23),Z=a.n(Y),$=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Z.a,{className:"dropMenu"},r.a.createElement(Z.a.Toggle,{variant:"",id:"dropdown-basic"},r.a.createElement("img",{className:"avatar",src:this.props.userLogged.avatar,alt:"avatar"})),r.a.createElement(Z.a.Menu,null,r.a.createElement(Z.a.Item,null,r.a.createElement(E.b,{to:"/profile/".concat(this.props.userLogged.username)},"Profile")),r.a.createElement(Z.a.Item,null,r.a.createElement(E.b,{to:"/profile/settings"},"Settings")),r.a.createElement(Z.a.Item,null,r.a.createElement(E.b,{to:"/product/upload"},"Upload New Asset")),r.a.createElement(Z.a.Item,{onClick:function(t){e.props.logout(t)}},"Log Out")))}}]),t}(n.Component),V=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.userLogged?r.a.createElement("nav",{className:"nav"},r.a.createElement(E.b,{to:"/"},r.a.createElement("span",{className:"name"},"3DGR")),r.a.createElement("div",{className:"menu"},r.a.createElement("div",null,r.a.createElement($,{logout:this.props.logout,userLogged:this.props.userLogged})),r.a.createElement("div",null,r.a.createElement(E.b,{to:"/cart"},r.a.createElement("img",{className:"cart",src:X.a,alt:"cart"}))))):r.a.createElement("nav",{className:"nav"},r.a.createElement(E.b,{to:"/"},r.a.createElement("span",{className:"name"},"3DGR")),r.a.createElement("div",{className:"menu"},r.a.createElement("div",null,r.a.createElement(E.b,{to:"/signup"},"Sign up")),r.a.createElement("div",null,r.a.createElement(E.b,{to:"/login"},"Login"))))}}]),t}(n.Component),ee=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.title,n=e.state.price,r=e.state.description,s=e.state.image,l=e.state.model,i=e.state.size;console.log(s),console.log(i),console.log(l),s?e.service.createAsset(a,n,r,l,i,s).then(function(t){e.setState({title:"",price:"",description:"",image:"",model:"",size:""})}).then(function(t){e.setState({created:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))}):e.service.createAsset(a,n,r,l,i).then(function(t){e.setState({title:"",price:"",description:"",model:"",size:""})}).then(function(t){e.setState({created:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleImgUpload=function(t){console.log("The file to be uploaded is: ",t.target.files[0]);var a=new FormData;a.append("modelImg",t.target.files[0]),e.service.handleUpload(a).then(function(t){console.log("response is: ",t),e.setState({image:t.secure_url})}).then(function(t){e.setState({imgUploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},e.handleModelUpload=function(t){console.log("The file to be uploaded is: ",t.target.files[0]);var a=new FormData;a.append("modelFile",t.target.files[0]),e.service.handleUploadModel(a).then(function(t){console.log("response is: ",t),e.setState({size:Math.floor(t.bytes/2048),model:t.secure_url})}).then(function(t){e.setState({modelUploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},e.state={title:"",price:"",description:"",image:"",model:"",size:"",created:!1,imgUploaded:!1,modelUploaded:!1},e.service=new M,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return!0===this.state.created?r.a.createElement(h.a,{to:"/profile/".concat(this.props.user)}):r.a.createElement("section",{className:"uploadNewAsset"},r.a.createElement("h1",null,"Upload your New Asset"),r.a.createElement("form",{className:"upload",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"upPart"},r.a.createElement("div",null,r.a.createElement("input",{name:"title",required:!0,placeholder:"Title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"price",type:"number",required:!0,placeholder:"Price",value:this.state.price,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("textarea",{name:"description",placeholder:"Description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("div",{className:"each"},r.a.createElement("label",{for:"cover"},"Cover Image"),r.a.createElement("input",{className:"file",name:"cover",type:"file",onChange:function(t){return e.handleImgUpload(t)}})),r.a.createElement("div",{className:"each"},r.a.createElement("label",{for:"model"},"Model File"),r.a.createElement("input",{className:"file",name:"model",required:!0,type:"file",onChange:function(t){return e.handleModelUpload(t)}}))),r.a.createElement("div",{className:"infernoPart"},this.state.modelUploaded?r.a.createElement("button",null,"Upload It!"):r.a.createElement("button",{disabled:!0},"Upload It!"))))}}]),t}(n.Component),te=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getProfile=function(){var t=e.props._id;e.service.getUser(t).then(function(t){e.setState(t)})},e.handleFormSubmitAvatar=function(t){t.preventDefault();var a=e.state.image;e.authService.editAvatar(a).then(function(t){e.setState({image:"",avatar:t.avatar}),e.props.reloadUser()}).then(function(t){e.setState({edited:!0})})},e.handleAboutSubmit=function(t){t.preventDefault();var a=e.state.about;e.authService.editAbout(a).then(function(t){e.setState({about:""}),e.props.reloadUser()}).then(function(t){e.setState({edited:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state.newPass,n=e.state.oldPass,r=e.state.newPassRepeat;e.authService.editProfile(n,a,r).then(function(t){e.setState({oldPass:"",newPass:"",newPassRepeat:""})}).then(function(t){e.setState({edited:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleFormDelete=function(t,a){t.preventDefault();var n=a;e.authService.deleteProfile(n).then(function(t){e.props.reloadUser()}).then(function(t){e.setState({deleted:!0})})},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleFileUpload=function(t){var a=new FormData;a.append("avatar",t.target.files[0]),e.authService.handleUpload(a).then(function(t){e.setState({image:t.secure_url})}).then(function(t){console.log("miuau hola como estas?"),e.setState({uploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},e.state={assetCollection:[],newPass:"",newPassRepeat:"",oldPass:"",about:"",avatar:"",secure_url:"",image:"",deleted:!1,edited:!1,uploaded:!1},e.service=new M,e.authService=new v,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getProfile()}},{key:"render",value:function(){var e=this;return!0===this.state.deleted?r.a.createElement(h.a,{to:"/"}):!0===this.state.edited?r.a.createElement(h.a,{to:"/profile/".concat(this.state.username)}):r.a.createElement("section",{className:"settings"},r.a.createElement("h1",null,"Settings"),r.a.createElement("div",{className:"upPart"},r.a.createElement("form",{className:"password",onSubmit:this.handleFormSubmit},r.a.createElement("input",{name:"oldPass",type:"text",placeholder:"Old Password",value:this.state.oldPass,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{name:"newPass",type:"text",placeholder:"New Password",value:this.state.newPass,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{name:"newPassRepeat",type:"text",placeholder:"Repeat New Password",value:this.state.newPassRepeat,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("button",null,"Change your Password!")),r.a.createElement("form",{className:"description",onSubmit:this.handleAboutSubmit},r.a.createElement("textarea",{name:"about",onChange:function(t){return e.handleChange(t)},value:this.state.about,placeholder:"About me..."}),r.a.createElement("button",null,"Change your Description!")),r.a.createElement("form",{className:"avatar",onSubmit:this.handleFormSubmitAvatar},r.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileUpload(t)}}),!0===this.state.uploaded?r.a.createElement("button",null,"Change your Avatar!"):r.a.createElement("button",{disabled:!0},"Change your Avatar!"))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("form",{className:"deleteAccount",onSubmit:function(t){return e.handleFormDelete(t,e.state._id)}},r.a.createElement("button",null,"Delete your account")),r.a.createElement("p",null,"(Only delete if you don't have any asset in your profile)")))}}]),t}(n.Component),ae=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.title,n=e.state.price,r=e.state.description,s=e.state.image,l=e.state.model,i=e.state.size;console.log(s),console.log(i),console.log(l),s?e.service.createAsset(a,n,r,l,i,s).then(function(t){e.setState({title:"",price:"",description:"",image:"",model:"",size:""})}).then(function(t){e.setState({created:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))}):e.service.createAsset(a,n,r,l,i).then(function(t){e.setState({title:"",price:"",description:"",model:"",size:""})}).then(function(t){e.setState({created:!0})}).catch(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{error:!0}))})},e.handleChange=function(t){t.preventDefault();var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleImgUpload=function(t){console.log("The file to be uploaded is: ",t.target.files[0]);var a=new FormData;a.append("modelImg",t.target.files[0]),e.service.handleUpload(a).then(function(t){console.log("response is: ",t),e.setState({image:t.secure_url})}).then(function(t){e.setState({imgUploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},e.handleModelUpload=function(t){console.log("The file to be uploaded is: ",t.target.files[0]);var a=new FormData;a.append("modelFile",t.target.files[0]),e.service.handleUploadModel(a).then(function(t){console.log("response is: ",t),e.setState({size:Math.floor(t.bytes/2048),model:t.secure_url})}).then(function(t){e.setState({modelUploaded:!0})}).catch(function(e){console.log("Error while uploading the file: ",e)})},e.state={title:"",price:"",description:"",image:"",model:"",size:"",created:!1,imgUploaded:!1,modelUploaded:!1},e.service=new M,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"edditAsset"},r.a.createElement("h1",null,"Update your New Asset"),r.a.createElement("form",{className:"upload",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"upPart"},r.a.createElement("div",null,r.a.createElement("input",{name:"title",placeholder:"Title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"price",type:"number",placeholder:"Price",value:this.state.price,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("textarea",{name:"description",placeholder:"Description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"lowPart"},r.a.createElement("div",{className:"each"},r.a.createElement("label",{for:"cover"},"Cover Image"),r.a.createElement("input",{className:"file",name:"cover",type:"file",onChange:function(t){return e.handleImgUpload(t)}})),r.a.createElement("div",{className:"each"},r.a.createElement("label",{for:"model"},"Model File"),r.a.createElement("input",{className:"file",name:"model",required:!0,type:"file",onChange:function(t){return e.handleModelUpload(t)}}))),r.a.createElement("div",{className:"infernoPart"},r.a.createElement("button",null,"Update It!"))))}}]),t}(n.Component),ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getTheUser=function(e){a.setState(Object(o.a)({},a.state,{loggedInUser:e}))},a.logout=function(e){e.preventDefault(),a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.fetchUser=function(){a.service.checkLogin().then(function(e){a.getTheUser(e)})},a.state={loggedInUser:null},a.service=new v,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.service.checkLogin().then(function(t){e.getTheUser(t)})}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{logout:this.logout,isProductList:this.state.isProductList,userLogged:this.state.loggedInUser}),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/profile/".concat(this.state.loggedInUser.username),render:function(){return r.a.createElement(z,Object.assign({},e.state.loggedInUser,{fetchUser:e.fetchUser}))}}),r.a.createElement(h.b,{exact:!0,path:"/(login|signup)/",render:function(){return r.a.createElement(h.a,{to:"/profile/".concat(e.state.loggedInUser.username)})}}),r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement(q,null))}}),r.a.createElement(h.b,{exact:!0,path:"/product/upload",render:function(){return r.a.createElement(ee,{user:e.state.loggedInUser.username})}}),r.a.createElement(h.b,{exact:!0,path:"/product/:id",render:function(t){return r.a.createElement(J,Object.assign({},t,e.state.loggedInUser))}}),r.a.createElement(h.b,{exact:!0,path:"/profile/settings",render:function(){return r.a.createElement(te,Object.assign({reloadUser:e.fetchUser},e.state.loggedInUser))}}),r.a.createElement(h.b,{exact:!0,path:"/product-edit",render:function(){return r.a.createElement(ae,null)}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement(q,null))}}),r.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(b,Object.assign({},e.state.loggedInUser,{getUser:e.getTheUser}))}}),r.a.createElement(h.b,{exact:!0,path:"/signup",render:function(){return r.a.createElement(w,null)}}),r.a.createElement(h.b,{exact:!0,path:"/product/:id",render:function(e){return r.a.createElement(J,e)}}),r.a.createElement(h.b,{exact:!0,path:"/profile/:id",render:function(){return r.a.createElement(h.a,{to:"/login"})}}),r.a.createElement(h.b,{exact:!0,path:"/product/upload",render:function(){return r.a.createElement(h.a,{to:"/login"})}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(E.a,null,r.a.createElement(ne,{router:E.a})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},32:function(e,t,a){e.exports=a.p+"static/media/bin.53c6c44c.png"},35:function(e,t,a){},39:function(e,t,a){e.exports=a.p+"static/media/edit-button.07c57606.svg"},62:function(e,t,a){e.exports=a.p+"static/media/banner1.b228988e.png"},63:function(e,t,a){e.exports=a.p+"static/media/banner2.5618a824.png"},64:function(e,t,a){e.exports=a.p+"static/media/banner3.4f689672.png"},65:function(e,t,a){e.exports=a.p+"static/media/banner3.65981485.jpg"},67:function(e,t,a){e.exports=a.p+"static/media/cart.0000ab50.png"},71:function(e,t,a){e.exports=a(122)}},[[71,1,2]]]);
//# sourceMappingURL=main.e3933043.chunk.js.map